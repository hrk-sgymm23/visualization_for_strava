# 📘 Repository Structure Overview
最終更新日: 2025-10-11

---
# リポジトリ構造と各ディレクトリの概要・主要関数

---

## ルートディレクトリ (`.`)

### 概要
プロジェクトのルートディレクトリには、環境設定ファイルやドキュメント、ビルド・実行関連ファイルが配置されています。  
Strava APIの認証情報を格納する `strava_tokens.json` もここにあります。

### 主なファイル
- `.env` / `.env.template`  
  環境変数設定ファイル。APIキーや認証情報などを管理。
- `Makefile`  
  ビルドや実行の自動化コマンドを定義。
- `README.md` / `Repository-Structure.md`  
  プロジェクトの説明や構造のドキュメント。
- `dockerfile`  
  Dockerコンテナのビルド設定。
- `requirements.txt`  
  Pythonの依存パッケージ一覧。
- `strava_tokens.json`  
  Strava APIのアクセストークン等の認証情報を保存。

---

## `data` ディレクトリ

### 概要
外部から取得したデータや加工済みのデータをCSV形式で保存するディレクトリ。

### 主なファイル
- `data/activities.csv`  
  Stravaから取得したアクティビティデータのCSVファイル。

---

## `scripts` ディレクトリ

### 概要
データ取得、認証処理、ドキュメント生成、テストなどの補助的なスクリプト群。

### 主なスクリプトと機能
- `auth.py`  
  Strava APIの認証処理を行う。アクセストークンの取得や更新を担当。
- `get_token.py`  
  アクセストークンの取得に特化したスクリプト。
- `get_activity.py`  
  Strava APIからアクティビティデータを取得し、CSVなどに保存。
- `convert.py`  
  データ形式の変換や加工処理を実施。
- `gen_doc.py`  
  ドキュメントの自動生成を行うスクリプト。
- `test.py`  
  各種機能の動作確認用テストスクリプト。

---

## `src` ディレクトリ

### 概要
アプリケーションの主要なソースコードを格納。  
設定、モデル、ビューの3層構造で整理されている。

### 主なファイル
- `app.py`  
  アプリケーションのエントリーポイント。FlaskなどのWebサーバー起動やルーティング設定を含む。
- `config.py`  
  アプリケーションの設定情報（APIキー、環境変数など）を管理。

---

### `src/models` ディレクトリ

#### 概要
データモデルを定義。Stravaのアクティビティデータ構造を表現し、データの操作・管理を担当。

#### 主なファイル
- `activities.py`  
  アクティビティデータのクラス定義やデータ処理関数を含む。  
  例: アクティビティのフィルタリング、集計関数など。

---

### `src/views` ディレクトリ

#### 概要
ユーザーに表示する画面やグラフ、テーブルの描画ロジックを担当。

#### 主なファイルと機能
- `chart.py`  
  アクティビティデータの可視化用チャート描画関数。  
  例: ランニング距離の推移グラフ、ペース分布チャートなど。
- `summary.py`  
  アクティビティの集計結果やサマリー情報の生成・表示。  
  例: 月別走行距離合計、平均ペースなどの統計情報。
- `tables.py`  
  アクティビティデータを表形式で整形・表示する関数。  
  例: 活動一覧テーブル、詳細情報テーブル。

---

## `tmp_csv` ディレクトリ

### 概要
一時的なCSVファイルを保存するディレクトリ。  
処理途中のデータや一時保存用のファイルを格納。

### 主なファイル
- `tmp_csv/activities.csv`  
  一時的に保存されたアクティビティCSVファイル。

---

# まとめ

| ディレクトリ/ファイル | 概要 | 主要機能・役割 |
|-----------------------|------|----------------|
| `.`                   | プロジェクトのルート。環境設定・ドキュメント・認証情報 | 環境変数管理、Docker設定、APIトークン管理 |
| `data`                | 外部データの保存 | StravaアクティビティCSV |
| `scripts`             | 補助スクリプト群 | 認証処理、データ取得、変換、ドキュメント生成、テスト |
| `src/app.py`          | アプリケーションの起動・ルーティング | Webサーバー起動、APIエンドポイント設定 |
| `src/config.py`       | 設定管理 | APIキーや環境変数の管理 |
| `src/models/activities.py` | データモデル定義 | アクティビティデータのクラス・処理関数 |
| `src/views/chart.py`  | チャート描画 | データのグラフ化 |
| `src/views/summary.py`| 集計・サマリー表示 | 統計情報の生成・表示 |
| `src/views/tables.py` | 表形式表示 | アクティビティ一覧や詳細のテーブル表示 |
| `tmp_csv`             | 一時CSVファイル保存 | 処理途中のデータ保存 |

---

以上がリポジトリ構造と各ディレクトリ・ファイルの概要および主要関数のまとめです。